<!DOCTYPE html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0">
    <title>北京移动</title>
    <link rel="stylesheet" type="text/css" href="css/style.css"/>
</head>
<body>
<!--最终的图片容器-->
<img id="jt_img"  style="width: 100%;height: 100%;position: absolute;left: 0;top: 0;"/>
<!--自己的画布-->
<canvas id="ourCanvas" style="position: absolute; left: 0;top:0; z-index: -1; opacity: 0"></canvas>

<div id="capture">
	<div class="s_part">
	   <img src="img/by.png" />
	</div>
	<div class="part2 clearfix">
	    <div class="md l">
	    	<p><span></span><i>1元1GB</i>&nbsp;&nbsp;全国流量</p>
	    	<p><span></span>前三个月&nbsp;&nbsp;<i>0月租</i></p>
	    	<p><span></span><i>30GB</i>&nbsp;&nbsp;定向流量</p>
	    	<p><span></span>首冲50&nbsp;&nbsp;<i>送50话费</i></p>
	    </div>
	    <div class="xc_code clearfix r">
	    	<span class="logo"><img src="img/logo.png"></span>
		     <div class="code">
				<span><img src="img/code.png" /></span>
				<p>扫码免费领卡</p>
		    </div>
	    </div>
	</div>
</div>
<script type="text/javascript" src="js/html2canvas.js"></script>
<script type="text/javascript" src="js/jquery-1.10.1.min.js"></script>
<script type="text/javascript" src="js/img.js"></script>
<script type="text/javascript">
//  html2canvas(document.body).then(function(canvas) {
//             document.body.appendChild(canvas);
//         });

//  html2canvas(inviteBox, opts).then((canvas) => {
//     let base64ImgSrc = canvas.toDataURL("image/png")
//     /* 如果只是显示,可用以下代码 */
//     let img = document.createElement("img")
//     img.src = base64ImgSrc 
//     document.body.appendChild(img)
// })
//截图
	var canvas = document.getElementById("ourCanvas");
	var width = $(window).width(); //获取dom 宽度
	var height = $(window).height(); //获取dom 高度
	var scale = 2;//需要做倍数转化，否则画面会糊掉
	function InitCanvas() {
		canvas.width = width * scale;
		canvas.height = height * scale;
		canvas.style.width = width + "px";
		canvas.style.height = height + "px";
		var context = canvas.getContext("2d");
		context.scale(scale, scale); //然后将画布缩放，将图像放大两倍画到画布上
	}
	//初始化画布
	InitCanvas();
	$("body").css("height", document.body.clientHeight + "px");
	setTimeout(function() {				
		setTimeout(function() {
			html2canvas($("#capture")[0], {
				scale: scale, // 添加的scale 参数
				canvas: canvas, //自定义 canvas
				width: width, //dom 原始宽度
				height: height,
				useCORS: true // 【重要】开启跨域配置
			}).then(function(canvas) {
				$("#capture").hide();
				imgData = canvas.toDataURL("image/jpg");
				$("#jt_img").attr("src", imgData);
				
			});
		}, 500);
	}, 500);
 </script>
</body>
</html>

